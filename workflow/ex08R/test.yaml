# >>>> Configuration 'README' >>>>
# >> General information >>
# This configuration file controls the behavior of the corresponding experiment workflow.
# One of the few "hard" constraints on the workflow is that this file is located
# in the same location as 'Snakefile' and 'scripts/'
# << General information <<

# >> Configuration >>
# Broadly, we split the configurable parameters of this workflow into 4 categories:
# 0) meta
# 1) network
# 2) experiment
# 3) workflow

# (0) meta
# These parameters control identifiers for resultant data.
# It is highly recommend you interface some external auto-increment tool,
# else this does not act as suitable "version control".

# (1) network
# Specify which networks should be ran as well as what layers.
# All alpha layers are paired with all beta layers.
# Generally, it is recommended you use alpha < beta - the MRP is inherently
# symmetric and reconstructing (alpha, beta) is the same as (beta, alpha).

# SOMETHING ABOUT ALPHA = BETA

# (2) experiment
# Here we add the "main" parameters in the experiment. These are properties of the procedure
# or tools used.
# Generally, "params" are parameters of research interest and will be sweeped over.
# "hyperparams" usually denote parameters that could have a non-negligible effect on results,
# however, there may not be a need/desire/intuition on their optimal values.

# (3) workflow
# These parameters are exclusively configurations on Snakemake and generated files.
# Changing them mostly comes down to researcher preference on file names.
# << Configuration <<

# >> Non-configurable >>
# The import of this file into the Snakemake workflow has to be hardcoded*.
# Do not rename this file or move anything.
# << Non-configurable <<
# <<<< Configuration 'README' <<<<
# =========================================
meta:
  project_id: "EMB_ex08R"
  current_version: "v1.0-DEBUG"
  researcher: "DK"


network:
  # arxiv:
  #   alpha: [1, 2] #, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13]
  #   beta: [2, 3]
  celegans:
    alpha: [1]
    beta: [2]
  # drosophila:
  #   alpha: [1, 2] #, 4, 5, 6, 7]
  #   beta: [2, 3]
  # london:
  #   alpha: [1, 2]
  #   beta: [2, 3]


experiment:
  params:
    pfis: [0.5] #[0.05, 0.10, 0.20, 0.30, 0.40, 0.50, 0.60, 0.70, 0.80, 0.90, 0.95]
    metrics: ["inverse"] #, "negexp"]
    repetitions: 1

  hyperparams:
    spectra:
      num_values: 40


workflow:
  pathing:
    input:
      raw: "{root}/data/input/raw"
      preprocessed: "{root}/data/input/preprocessed/real"
    output:
      dataframe: "{root}/results/dataframes"
      figures: "{root}/results/plots"
      reports: "{root}/results/reports"
    scripts: "./scripts/"
    temp: "{root}/workflow/.tmp"

  datafiles:
    input:
      duplex: "{dir}/duplex_system={{system}}.edgelist"
    intermediary:
      observation: "{dir}/observed_system={{system}}_pfi={{pfi}}_rep={{rep}}_alpha={{alpha}}_beta={{beta}}.pkl"
      spectra: "{dir}/sprectra_system={{system}}_pfi={{pfi}}_rep={{rep}}_alpha={{alpha}}_beta={{beta}}.pkl"
      distances: "{dir}/distances_system={{system}}_pfi={{pfi}}_rep={{rep}}_alpha={{alpha}}_beta={{beta}}.pkl"
      reconstruction: "{dir}/reconstruction_system={{system}}_metric={{metric}}_pfi={{pfi}}_rep={{rep}}_alpha={{alpha}}_beta={{beta}}.pkl"
      record: "{dir}/record_system={{system}}_metric={{metric}}_pfi={{pfi}}_rep={{rep}}_alpha={{alpha}}_beta={{beta}}.pkl"
    output:
      dataframe: "{dir}/dataframe_{project_id}{current_version}_{researcher}_{date}.parquet"
      report: "{dir}/report_{project_id}{current_version}_{researcher}_{date}.html"
      dag: "{dir}/dag_{project_id}{current_version}_{researcher}_{date}.svg"
      figures:
        scatter: "{dir}/scatter_{project_id}{current_version}_{researcher}_{date}.png"